<!-- begin page-header -->
<%= render 'layouts/static/header', header_title:  params[:action] == 'new' ? 'Create New Contact' : "Edit Contact - #{shipper_contact.first_name} #{shipper_contact.last_name}" %>
<!-- end page-header -->
<!-- begin panel -->
<div class="panel panel-inverse">
  <div class="panel-heading">
    <div class="panel-heading-btn">
    </div>
    <h4 class="panel-title"> Information</h4>
  </div>
  <div class="panel-body">
  <%= form_with(model: shipper_contact, local: true, :html => {class: 'form-horizontal', 'data-parsley-validate' => true}) do |form| %>
  <%= form.hidden_field :shipper_id %>
  <% if shipper_contact.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(shipper_contact.errors.count, "error") %> prohibited this contact from being saved:</h2>

      <ul>
      <% shipper_contact.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
            <div class="form-group row m-b-15">
              <%= form.label :contact_type, 'Contact Type:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
              <div class="col-md-9 col-sm-8">
                <%= form.select :contact_type, options_for_select(['Owner', 'President/GM/CEO', 'Sales', 'Sales Manager', 'Dispatch & Operations', 'Customer Service', 'Accounts Receivable'], shipper_contact.contact_type),{:include_blank => true}, class: 'form-control' %>
              </div>
            </div>
            <div class="form-group row m-b-15">
              <label class="text-right col-md-2 col-sm-4 col-form-label">is it Primary Ops Contact?</label>
              <div class="col-md-9 col-sm-8">
                <input type="checkbox" name="pdm"  data-render="switchery" data-theme="default" data-secondary-color="rgb(255, 91, 87)"  <%= is_pdm ? 'checked' : '' %> >
              </div>
            </div>
            <div class="form-group row m-b-15">
              <label class="text-right col-md-2 col-sm-4 col-form-label">is it Primary Decision Maker? </label>
              <div class="col-md-9 col-sm-8">
                <input type="checkbox" name="poc"   data-render="switchery" data-theme="default" data-secondary-color="rgb(255, 91, 87)"  <%= is_poc ? 'checked' : '' %> >
              </div>
            </div>
              <div class="form-group row m-b-15">
                <%= form.label :first_name, 'First Name:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                <div class="col-md-9 col-sm-8">
                <%= form.text_field :first_name, class: 'form-control' %>
                </div>
              </div>
              <div class="form-group row m-b-15">
                <%= form.label :last_name, 'Last Name:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                <div class="col-md-9 col-sm-8">
                <%= form.text_field :last_name, class: 'form-control' %>
                </div>
              </div>
                <div class="form-group row m-b-15">
                  <%= form.label :title, 'Title:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.text_field :title, class: 'form-control' %>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <%= form.label :linkedin_link, 'LinkedIn:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.url_field :linkedin_link, class: 'form-control'%>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <%= form.label :email, 'Email Address:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.email_field :email, class: 'form-control' %>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <%= form.label :password, 'Password:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.password_field :password, class: 'form-control' %>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <%= form.label :confirm_password, 'Confirm Password:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.password_field :confirm_password, class: 'form-control' %>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <%= form.label :home_phone, 'Cell:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.text_field :home_phone, class: 'form-control', 'data-inputmask' => "'mask': '(999) 999-9999'" %>
                  </div>
                </div>
                <div class="form-group row m-b-15">
                  <label class="text-right col-md-2 col-sm-4 col-form-label">same as Head Office or Master Shipper Record? </label>
                  <div class="col-md-9 col-sm-8">
                    <input type="checkbox" name="same_ho" data-render="switchery" data-theme="default" data-secondary-color="rgb(255, 91, 87)" data-change="check-switchery-state-text"  <%= shipper_contact.same_ho ? 'checked' : '' %>/>
                  </div>
                </div>
                <div class="form-group row m-b-15 address-fields">
                  <%= form.label :work_phone, 'Work Phone:', class: 'text-right col-md-2 col-sm-4 col-form-label' %>
                  <div class="col-md-9 col-sm-8">
                  <%= form.text_field :work_phone, class: 'form-control', 'data-inputmask' => "'mask': '(999) 999-9999'" %>
                  </div>
                </div>
                <%= render 'shippers/address_form', form: form %>


                <div class="form-group row m-b-0">
                  <label class="text-right col-md-2 col-sm-4 col-form-label">&nbsp;</label>
                  <div class="col-md-9 col-sm-8">
                    <%= form.submit 'Submit', :class => 'btn btn-primary' %>
                    <% shipper = Shipper.find(shipper_contact.shipper_id)%>
                    <% if params[:action] == 'edit' %>
                      &nbsp;&nbsp;<%= link_to 'Show', shipper, :class => 'btn btn-info' %>
                    <% end %>
                    <% if params[:action] == 'new' %>
                      &nbsp;&nbsp;<%= link_to 'Back', shippers_path, :class => 'btn btn-default' %>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
</div>
<!-- end panel -->
<script language="javascript">
	populateCountries("shipper_contact_country", "shipper_contact_state");
  <%# if shipper_contact.country.present? %>
    // tiggerChangeOnSelectCountry('shipper_contact_country', '<%# shipper_contact.country %>')
  <%# end %>
  <%# if shipper_contact.state.present? %>
    // tiggerChangeOnSelectCountry('shipper_contact_state', '<%# shipper_contact.state %>')
  <%# end %>
</script>
