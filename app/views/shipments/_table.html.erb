
<!-- begin page-header -->
<!-- end page-header -->
<!-- begin panel -->
<div class="panel panel-inverse">
  <div class="panel-heading">
    <div class="panel-heading-btn">
    <%= link_to 'New Shipment', (params[:controller] == 'master_invoices' ? new_shipment_path(:header => master_invoice.id) : new_shipment_path), :class => 'btn btn-primary btn-xs' %>
    </div>
    <h4 class="panel-title">Shipments</h4>
  </div>
  <div class="panel-body">
    <table id="data-table-buttons" class="table table-striped table-bordered data-table-buttons">
    								<thead>
    									<tr class="odd gradeX">
                        <th class="text-nowrap">Origin</th>
                        <th class="text-nowrap">Destination</th>
                        <th class="text-nowrap">Weight</th>
                        <th class="text-nowrap">Cost</th>
                        <th class="text-nowrap">Cost Per LB</th>
                        <th class="text-nowrap">Carrier</th>
                        <th class="text-nowrap">Inter</th>
                        <th class="text-nowrap">Intra</th>
                        <th class="text-nowrap">to USA</th>
                        <th class="text-nowrap">from USA</th>
                        <th class="text-nowrap">Reference #</th>
										    <th class="text-nowrap" data-orderable="false">Actions</th>
    									</tr>
    								</thead>
                    <tbody>
                      <% shipments.each do |shipment| %>
                      <tr>
                        <td><%= shipment.origin_location.nil? ? "" : "#{shipment.origin_location.name}" %></td>
                        <td><%= shipment.destination_location.nil? ? "" : "#{shipment.destination_location.name}" %></td>
                        <td><%= shipment.billed_weight.nil? ? 0 : shipment.billed_weight %></td>
                        <td><%= shipment.total_charge.nil? ? 0 : shipment.total_charge %></td>
                        <td><%= number_with_precision (shipment.billed_weight.nil? ? 0 : shipment.billed_weight) / (shipment.total_charge.nil? ? 0 : shipment.total_charge), :precision => 2 %></td>
                        <td><%= shipment.invoice.nil? ? '' : (shipment.invoice.carrier.nil? ? '' : shipment.invoice.carrier.company_name) %></td>
                        <td><%= shipment.shipper.nil? ? "" : "#{shipment.shipper.volume_inter}" %></td>
                        <td><%= shipment.shipper.nil? ? "" : "#{shipment.shipper.volume_intra}" %></td>
                        <td><%= shipment.shipper.nil? ? "" : "#{shipment.shipper.volume_to_usa}" %></td>
                        <td><%= shipment.shipper.nil? ? "" : "#{shipment.shipper.volume_from_usa}" %></td>
                        <td><%= shipment.invoice.nil? ? '' : "#{generate_alphanumeric_id(shipment.invoice.shipment_type, shipment.invoice.id)}" %></td>
                        <td>
                          <%= link_to '<i class="far fa-eye"></i>'.html_safe, shipment, :class => 'btn btn-info' %>
                          <%= link_to '<i class="far fa-edit"></i>'.html_safe, edit_shipment_path(shipment), :class => 'btn btn-warning' %>
                          <%= link_to '<i class="fas fa-trash-alt"></i>'.html_safe, shipment, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-danger'%>
                        </td>
                      <% end %>
                    </tbody>
                  </table>
  </div>
</div>
<!-- end panel -->
