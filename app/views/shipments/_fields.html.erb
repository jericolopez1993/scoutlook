
<div class="row">
  <div class="col-lg-6">
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Basic Information<%= params[:action] == 'edit' ? ": #{generate_two_alphanumeric_id((shipment.origin_location.nil? ? "" : shipment.origin_location.name), (shipment.destination_location.nil? ? "" : shipment.destination_location.name), shipment.id)}" : ''%></h4>
      </div>
      <div class="panel-body">
              <div class="form-group row m-b-15">
                <%= form.label :account_number, 'Account Number:', class: 'col-md-4 col-sm-4 col-form-label' %>
                <div class="col-md-8 col-sm-8">
                <%= form.text_field :account_number, class: 'form-control', value: shipment.account_number  %>
                </div>
              </div>
                  <div class="form-group row m-b-15">
                    <%= form.label :shipment_date, 'Shipment Date *:', class: 'col-md-4 col-sm-4 col-form -label' %>
                    <div class="col-md-8 col-sm-8">
                      <%= form.text_field :shipment_date, class: 'form-control datepicker-autoClose', 'data-inputmask' => "'alias': 'mm/dd/yyyy'", value: shipment.shipment_date%>
                    </div>
                  </div>
                    <div class="form-group row m-b-15">
                      <%= form.label :tracking_number, 'Tracking Number *:', class: 'col-md-4 col-sm-4 col-form-label' %>
                      <div class="col-md-8 col-sm-8">
                      <%= form.text_field :tracking_number, class: 'form-control', 'data-parsley-required' => true, value: shipment.tracking_number  %>

                      </div>
                    </div>
                    <div class="form-group row m-b-15">
                      <%= form.label :terms, 'Terms *:', class: 'col-md-4 col-sm-4 col-form-label' %>
                      <div class="col-md-8 col-sm-8">
                      <%= form.select :terms, options_for_select(['Prepaid', 'Collect'], shipment.terms),{:include_blank => true}, class: 'form-control' %>
                      </div>
                    </div>
                    <div class="form-group row m-b-15">
                      <%= form.label :notes, 'Notes:', class: 'col-md-4 col-sm-4 col-form-label' %>
                      <div class="col-md-8 col-sm-8">
                      <%= form.text_area(:notes, cols: 20, rows: 15,  class: 'tinymce', :value => shipment.notes)  %>
                      </div>
                    </div>
                    <div class="form-group row m-b-15">
                      <%= form.label :shipment_attachment_file, 'Attachment:', class: 'col-md-4 col-sm-4 col-form-label' %>
                      <div class="col-md-8 col-sm-8">
                      <%= form.file_field :shipment_attachment_file  %>
                      </div>
                    </div>

                </div>
    </div>
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Bill & Surcharges</h4>
      </div>
      <div class="panel-body">
        <div class="form-group row m-b-15">
          <%= form.label :billed_rate, 'Billed Rate:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :billed_rate, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.billed_rate, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :billed_rate_unit, 'Billed Rate Unit:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.select :billed_rate_unit, options_for_select(['Min Charge', 'Pallet', 'CWT', 'TL', 'Flat Fee', 'Base', '20 CTR', '40 CTR'], shipment.billed_rate_unit),{:include_blank => true}, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surcharge_ontario, 'Surcharge Ontario:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surcharge_ontario, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surcharge_ontario, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surcharge_non_conveyables, 'Surcharge Non Conveyables:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surcharge_non_conveyables, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surcharge_non_conveyables, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surcharge_non_vault, 'Surcharge Non Vault:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surcharge_non_vault, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surcharge_non_vault, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surchange_multi_piece, 'Surcharge Multi Piece:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surchange_multi_piece, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surchange_multi_piece, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surcharge_fuel, 'Surcharge Fuel:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surcharge_fuel, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surcharge_fuel, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :surcharge_weight, 'Surcharge Weight:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :surcharge_weight, class: 'form-control total_charge_fields total_charge_with_tax_fields', value: shipment.surcharge_weight, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :gst_hst_tax, 'GST/HST Tax:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :gst_hst_tax, class: 'form-control total_charge_with_tax_fields', value: shipment.gst_hst_tax, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'" %>
          </div>
        </div>
        <% if params[:controller] != 'master_invoices'%>
        <div class="form-group row m-b-15">
          <%= form.label :total_charge, 'Total Charge:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :total_charge, class: 'form-control', value: shipment.total_charge, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'", :readonly => true %>
          </div>
        </div>
        <% else %>
        <div class="form-group row m-b-15">
          <%= form.label :total_charge_shipment, 'Total Charge:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :total_charge_shipment, class: 'form-control', value: shipment.total_charge, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'", :readonly => true %>
          </div>
        </div>

        <% end %>
        <div class="form-group row m-b-15">
          <%= form.label :total_charge_with_tax, 'Total Charge with Tax:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :total_charge_with_tax, class: 'form-control', value: shipment.total_charge_with_tax, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '$ ', 'placeholder': '0'", :readonly => true %>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="col-lg-6">
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Origin</h4>
      </div>
      <div class="panel-body">
        <%= render 'clients/od_address_form', form: form, name: 'origin' %>
      </div>
    </div>
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Destination</h4>
      </div>
      <div class="panel-body">
        <%= render 'clients/od_address_form', form: form, name: 'destination' %>
      </div>
    </div>
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Map</h4>
      </div>
      <div class="panel-body">
        <div class="form-group row m-b-15">
          <label class="col-md-4 col-sm-4 col-form-label">Distance</label>
          <div class="col-md-8 col-sm-8">
            <input class="form-control" data-inputmask="'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '', 'placeholder': '0'" id="distance" type="text" readonly='readonly' value="<%= shipment.distance %>">

          </div>
        </div>
          <img id='map' src="https://maps.googleapis.com/maps/api/staticmap?size=512x512&maptype=roadmap\&markers=size:mid%7Ccolor:red%7C<%= shipment.origin_location.nil? ? "" : "#{shipment.origin_location.address} #{shipment.origin_location.state},#{shipment.origin_location.country}" %>%7C<%= shipment.destination_location.nil? ? "" : "#{shipment.destination_location.address} #{shipment.destination_location.state},#{shipment.destination_location.country}" %>&key=AIzaSyCbFFNkesD-8_F4lMdyihwqpARlDYmG6k0" />
      </div>
    </div>
    <div class="panel panel-inverse">
      <div class="panel-heading">
        <div class="panel-heading-btn">
        </div>
        <h4 class="panel-title">Item Information</h4>
      </div>
      <div class="panel-body">
        <div class="form-group row m-b-15">
          <%= form.label :pieces, 'Piece:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.number_field :pieces, class: 'form-control', value: shipment.pieces %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :pallets, 'Pallet:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.number_field :pallets, class: 'form-control', value: shipment.pallets %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :unit_of_weight, 'Unit of Weight:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.select :unit_of_weight, options_for_select(['kg', 'lb'], shipment.unit_of_weight),{:include_blank => true}, class: 'form-control' %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :declared_weight, 'Declared Weight:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :declared_weight, class: 'form-control', value: shipment.declared_weight, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '', 'placeholder': '0'" %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :billed_weight, 'Billed Weight:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :billed_weight, class: 'form-control', value: shipment.billed_weight, 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '', 'placeholder': '0'"%>

          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :raw_weight, 'Reweigh Weight:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.text_field :raw_weight, class: 'form-control', 'data-inputmask' => "'alias': 'numeric', 'groupSeparator': ',', 'autoGroup': true, 'digits': 2, 'digitsOptional': false, 'prefix': '', 'placeholder': '0'", value: shipment.raw_weight %>
          </div>
        </div>
        <div class="form-group row m-b-15">
          <%= form.label :service_mode, 'Service Mode:', class: 'col-md-4 col-sm-4 col-form-label' %>
          <div class="col-md-8 col-sm-8">
          <%= form.select :service_mode, options_for_select(['Ground', 'Sea', 'Air'], shipment.service_mode),{:include_blank => true}, class: 'form-control' %>
          </div>
        </div>
      </div>
    </div>
    <% if params[:controller] != 'master_invoices'%>
    <div class="form-group row text-right">
      <div class="col-md-12 col-sm-12">
        <%= form.submit 'Submit', :class => 'btn btn-primary' %>
        <% if params[:action] == 'edit' %>
          &nbsp;&nbsp;<%= link_to 'Show', shipment, :class => 'btn btn-info' %>
        <% end %>
          <% if shipment.header.nil? %>
            &nbsp;&nbsp;<%= link_to 'Back', shipments_path, :class => 'btn btn-default' %>
          <% else %>
            &nbsp;&nbsp;<%= link_to 'Back to Invoice', master_invoice_path(:id => shipment.header), :class => 'btn btn-default' %>
          <% end %>
      </div>
    </div>
  <% end %>
  </div>
</div>
<%= tinymce %>
