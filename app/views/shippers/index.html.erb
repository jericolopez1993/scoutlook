<!-- begin page-header -->
<%= render 'layouts/static/header', header_title: 'Shippers' %>
<!-- end page-header -->
<!-- begin panel -->
<div class="panel panel-inverse">
  <div class="panel-heading">
    <div class="panel-heading-btn">
    <%= link_to 'New Shipper', new_shipper_path, :class => 'btn btn-primary btn-xs' %>
    </div>
    <h4 class="panel-title">List of Shippers</h4>
  </div>
  <div class="panel-body">
    <table class="table table-striped table-bordered data-table-buttons display nowrap">
      <thead>
        <tr class="odd gradeX">
          <th>Name</th>
          <th>Complete?</th>
          <th>Last Contact</th>
          <th>Shipper Type</th>
          <th>Sales Priority</th>
          <th>Control Freight</th>
          <th>Loads Per Month</th>
          <th>Spend Per Year</th>
          <th>Commodities</th>
          <th>Blue Book Score</th>
          <th>Buying Criteria</th>
          <th>Works with Brokers?</th>
          <th>Price Sensitivity</th>
          <th>Prefer Teams?</th>
        </tr>
      </thead>
      <tbody>
        <% @shippers.each do |shipper| %>
          <tr>
            <td><%= link_to shipper.company_name.blank? ? "(no name)" : shipper.company_name, shipper %></td>
            <td><%= shipper.complete_record ? "<b class='text-success'>Completed</b>".html_safe : "<i class='text-danger'>Incomplete</i>".html_safe %></td>
            <td><%= shipper.last_contact_date.nil? ? "" : (shipper.last_contact_date.date_opened.to_s + " " + (shipper.last_contact_date.rep.nil? ? "" : link_to(shipper.last_contact_date.rep.full_name, shipper.last_contact_date.rep))).html_safe %></td>
            <td><%= shipper.shipper_type %></td>
            <td><%= shipper.sales_priority %></td>
            <td><%= shipper.control_freight ? "<i class='fas fa-check fa-2x text-success'></i>".html_safe : "<i class='fas fa-times fa-2x text-danger'></i>".html_safe %></td>
            <td><%= shipper.loads_per_month %></td>
            <td><%= shipper.spend_per_year %></td>
            <td>
                <% shipper.commodities_to_array.each do |cr| %>
                  <span class="badge badge-inverse"><%= cr %></span>
                <% end %>
            </td>
            <td>
              <% if shipper.blue_book_url %>
                <a target="_blank" href="<%= shipper.blue_book_url %>">
                  <%= shipper.blue_book_score %>
                </a>
              <% else %>
                <%= shipper.blue_book_score %>
              <% end %>
            </td>
            <td><%= shipper.buying_criteria %></td>
            <td><%= shipper.works_with_brokers ? "<i class='fas fa-check fa-2x text-success'></i>".html_safe : "<i class='fas fa-times fa-2x text-danger'></i>".html_safe %></td>
            <td><%= shipper.price_sensitivity %></td>
            <td><%= shipper.prefer_teams ? "<i class='fas fa-check fa-2x text-success'></i>".html_safe : "<i class='fas fa-times fa-2x text-danger'></i>".html_safe %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</div>
<!-- end panel -->
