$("div#showTruck").find(".modal-body").html("<%= escape_javascript(render 'truck_tiles/form', truck_tile: @truck_tile, form_id: 'edit_load') %>");
$("div#showTruck").find(".modal-title").text("Edit - <%= escape_javascript(@truck_tile.name) %>")
$(".new-truck-origin-multiple").select2({placeholder: "Select origins", allowClear: true, dropdownParent: $("#edit_truck")});
$(".new-truck-destination-multiple").select2({placeholder: "Select destinations", allowClear: true, dropdownParent: $("#edit_truck")});
$(".new-truck-origin-multiple").val(<%= raw @truck_tile.origin_to_array %>).trigger("change");
$(".new-truck-destination-multiple").val(<%= raw @truck_tile.destination_to_array %>).trigger("change");
$('.datepicker-autoClose').datepicker({
  autoclose: true,
  orientation: 'auto bottom'
});
$("#showTruck").modal('show');

$(function () {
  $( ".sortable-truck" ).sortable({
        connectWith: '.sortable-truck',
        cursor: 'move',
      placeholder: 'placeholder',
      forcePlaceholderSize: true,
      opacity: 0.4,
          stop: function(event, ui) {
            $.ajax({
              method: "PUT",
              url: "/api/truck_tiles/"+$(ui.item).data('id'),
              data: {
                load_date: $(ui.item).parent().parent().data('date')
              }
            }).done(function (data) {
            });
          }
   });
   $( ".sortable-load" ).sortable({
         connectWith: '.sortable-load',
         cursor: 'move',
      placeholder: 'placeholder',
      forcePlaceholderSize: true,
      opacity: 0.4,
           stop: function(event, ui) {
             $.ajax({
               method: "PUT",
               url: "/api/load_tiles/"+$(ui.item).data('id'),
               data: {
                 load_date: $(ui.item).parent().parent().data('date')
               }
             }).done(function (data) {
             });
           }
    });
 });
 function addDateToLoadForm(date) {
   $("#new_load").find("#last_load_date").datepicker('update', date);
   $("#newLoadForm").modal('show');
 }
 function addDateToTruckForm(date) {
   $("#new_truck").find("#last_load_date").datepicker('update', date);
   $("#newTruckForm").modal('show');
 }
